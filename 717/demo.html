<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>
    <button>添加</button>
    <button>替换</button>
    <a>1</a>
    <a>2</a>
    <a>3</a>
    <a>4</a>
</body>

<script>
    let btn = document.querySelectorAll('button');
    let allA = document.querySelectorAll('a');
    // hash history
    // #后跟的字符，h5新增

    // pushState向浏览器记录里面添加一条记录，3个参数，data,title,url
    //  data 跟当前的记录关联的数据
    //  title
    //  url  新立即记录的链接
    btn[0].addEventListener('click', function () {
        history.pushState({test: 123}, 'title', location.href + '?test=123');
    })
    // console.log(history);

    // replaceState 将当前的记录替换为新的记录
    btn[1].addEventListener('click', function () {
        history.replaceState({test: 456}, 'title', location.href + '?test=456')
    });

    /* // popstate 监听history事件
    window.onpopstate = function () {
        console.log('history = '+location.href);
    } */

    
    for (let i=0; i<allA.length; i++) {
        // console.log(allA[i])
        allA[i].addEventListener('click', function () {
            // console.log(this);
            // # 后发生变化
            this.href = "#" + '/admin'+this.innerHTML;
            window.onhashchange = function () {
                // location.hash = 
                console.log('hash = '+location.hash)
            }
        })
    }
</script>
</html>